<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/suggestions-jquery@21.12.0/dist/css/suggestions.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/suggestions-jquery@21.12.0/dist/js/jquery.suggestions.min.js"></script>
<script>
// function join(arr) {
//     var separator = arguments.length > 1 ? arguments[1] : ", ";
//     return arr.filter(function (n) { return n }).join(separator);
//   }
//
//   function geoQuality(qc_geo) {
//     var localization = {
//       "0": "точные",
//       "1": "ближайший дом",
//       "2": "улица",
//       "3": "населенный пункт",
//       "4": "город"
//     };
//     return localization[qc_geo] || qc_geo;
//   }
//
//   function fillPostalCode(address) {
//     var postKode = address.postal_code;
//     if (address.postal_code) $("#PostIndex").val(postKode);
//     else $("#PostIndex").val(0);
//   }
//
//   function fillCountry(address) {
//     var cntry = address.country;
//     $("#Country").val(cntry);
//   }
//
//   function fillRegionFull(address) {
//     $("#RegionFull").val(join([
//       join([address.region, address.region_type], ". "),
//       join([address.area, address.area_type], " ")
//     ]));
//   }
//
//   function fillRegion(address) {
//     $("#Region").val(address.region);
//   }
//
//   function fillCity(address) {
//     $("#Town").val(join([
//       join([address.city, address.city_type], ". "),
//       join([address.settlement_type, address.settlement], " ")
//     ]));
//   }
//
//   function fillStreet(address) {
//     $("#Street").val(
//       join([address.street, address.street_type], ". ")
//     );
//   }
//
//   function fillHouse(address) {
//     $("#House").val(join([
//       join([address.house_type, address.house], ". "),
//       join([address.block_type, address.block], " ")
//     ]));
//   }
//
//   function fillFlat(address) {
//     $("#Flat").val(
//       join([address.flat_type, address.flat], " ")
//     );
//   }
//
//   function fillGeo(address) {
//     if (address.qc_geo !== "5") {
//       $("#Lat").val(address.geo_lat);
//       $("#Lon").val(address.geo_lon);
//       $("#Gc").val(geoQuality(address.qc_geo));
//     }
//     else {
//       $("#Lat").val(0);
//       $("#Lon").val(0);
//     }
//   }

  function fillSelected(suggestion) {
    let address = suggestion.data;
    
    if (address.postal_code) $("#PostIndex").val(address.postal_code);
    else $("#PostIndex").val(0);
    
    $("#Country").val(address.country);
    
    $("#Region").val(address.region);
    
    $("#RegionFull").val(join([
          join([address.region, address.region_type], ". "),
          join([address.area, address.area_type], " ")
    ]));
    
    $("#Town").val(join([
          join([address.city, address.city_type], ". "),
          join([address.settlement_type, address.settlement], " ")
        ]));
    
    $("#Street").val(
          join([address.street, address.street_type], ". ")
        );
    
    $("#House").val(join([
          join([address.house_type, address.house], ". "),
          join([address.block_type, address.block], " ")
        ]));
    
    if (address.qc_geo !== "5") {
          $("#Lat").val(address.geo_lat);
          $("#Lon").val(address.geo_lon);
          $("#Gc").val(geoQuality(address.qc_geo));
        }
        else {
          $("#Lat").val(0);
          $("#Lon").val(0);
        }
  }
  
  
  
  function fillSelected2(suggestion) {
      let address = suggestion.data;
      
      if (address.postal_code) $("#PostIndex2").val(address.postal_code);
      else $("#PostIndex2").val(0);
      
      $("#Country2").val(address.country);
      
      $("#Region2").val(address.region);
      
      $("#RegionFull2").val(join([
            join([address.region, address.region_type], ". "),
            join([address.area, address.area_type], " ")
      ]));
      
      $("#Town2").val(join([
            join([address.city, address.city_type], ". "),
            join([address.settlement_type, address.settlement], " ")
          ]));
      
      $("#Street2").val(
            join([address.street, address.street_type], ". ")
          );
      
      $("#House2").val(join([
            join([address.house_type, address.house], ". "),
            join([address.block_type, address.block], " ")
          ]));
      
      if (address.qc_geo !== "5") {
            $("#Lat2").val(address.geo_lat);
            $("#Lon2").val(address.geo_lon);
            $("#Gc2").val(geoQuality(address.qc_geo));
          }
          else {
            $("#Lat2").val(0);
            $("#Lon2").val(0);
          }
    }
  
  
  
  $("#AdrName").suggestions({
    token: "6aaaba01d2581d13f80a158aa03154cc7d0e470d",
    type: "ADDRESS",
    onSelect: fillSelected
  });

  $("#AdrName2").suggestions({
    token: "6aaaba01d2581d13f80a158aa03154cc7d0e470d",
    type: "ADDRESS",
    onSelect: fillSelected2
  });


////COPYPASTE



</script>